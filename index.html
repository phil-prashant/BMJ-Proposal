<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Proposal for Chi Feng Mu | BMJ-Machinery Marketing Solutions</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-navy: #1a3b5c;
            --primary-cyan: #00d9ff;
            --accent-orange: #ff6b35;
            --text-dark: #2c3e50;
            --bg-light: #f8f9fa;
            --success-green: #28a745;
            --border-color: #dee2e6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Sticky Header */
        .sticky-header {
            position: sticky;
            top: 0;
            background: var(--primary-navy);
            color: white;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 15px;
            align-items: center;
        }

        .header-info h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .header-metrics {
            display: flex;
            gap: 20px;
            font-size: 0.95rem;
        }

        .metric {
            display: flex;
            flex-direction: column;
        }

        .metric-label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-cyan);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: var(--primary-cyan);
            color: var(--primary-navy);
        }

        .btn-primary:hover:not(:disabled) {
            background: #00b8d4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,217,255,0.3);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-navy);
            border: 2px solid var(--primary-cyan);
        }

        .btn-secondary:hover {
            background: var(--primary-cyan);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Company Summary */
        .company-summary {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .company-summary h2 {
            color: var(--primary-navy);
            margin-bottom: 15px;
        }

        .intro-text {
            background: #e3f2fd;
            border-left: 4px solid var(--primary-cyan);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }

        .instructions {
            background: #fff3cd;
            border-left: 4px solid var(--accent-orange);
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .instructions ol {
            margin-left: 20px;
            margin-top: 10px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        /* Base Packages */
        .packages-section {
            margin: 30px 0;
        }

        .section-title {
            font-size: 2rem;
            color: var(--primary-navy);
            margin-bottom: 20px;
            text-align: center;
        }

        .packages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (min-width: 1200px) {
            .packages-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .package-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .package-card input[type="radio"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .package-card.selected {
            border-color: var(--primary-cyan);
            background: #f0f9ff;
        }

        .package-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .package-content {
            flex: 1;
        }

        .package-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-navy);
            margin-bottom: 5px;
        }

        .package-price {
            font-size: 1.8rem;
            color: var(--accent-orange);
            font-weight: bold;
            margin-bottom: 15px;
        }

        .package-features {
            list-style: none;
            margin: 15px 0;
        }

        .package-features li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .package-features li:before {
            content: "âœ“";
            color: var(--success-green);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Add-ons Section */
        .addons-section {
            margin: 30px 0;
        }

        .addons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        @media (min-width: 1200px) {
            .addons-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .addon-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .addon-card.disabled {
            opacity: 0.5;
        }

        .addon-card input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 3px;
        }

        .addon-card.disabled input[type="checkbox"] {
            cursor: not-allowed;
        }

        .addon-content {
            flex: 1;
        }

        .addon-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-navy);
            margin-bottom: 5px;
        }

        .addon-price {
            font-size: 1.1rem;
            color: var(--accent-orange);
            font-weight: 600;
            margin-bottom: 10px;
        }

        /* Payment Terms */
        .payment-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .payment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .payment-option {
            background: #f8f9fa;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .payment-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .payment-option.selected {
            border-color: var(--primary-cyan);
            background: #f0f9ff;
        }

        .payment-label {
            flex: 1;
        }

        .payment-term {
            font-weight: bold;
            color: var(--primary-navy);
            font-size: 1.1rem;
        }

        .discount-badge {
            background: var(--success-green);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-left: 8px;
        }

        /* Finalize Button */
        .finalize-section {
            text-align: center;
            margin: 40px 0;
        }

        .btn-finalize {
            background: var(--accent-orange);
            color: white;
            font-size: 1.2rem;
            padding: 16px 40px;
        }

        .btn-finalize:hover:not(:disabled) {
            background: #e55a2b;
            transform: translateY(-2px);
        }

        /* Terms Section */
        .terms-section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 8px;
            margin: 20px 0;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .terms-checkbox.pulse {
            animation: pulse-border 2s ease-in-out 3;
            border-color: var(--primary-cyan);
        }

        @keyframes pulse-border {
            0%, 100% { 
                border-color: var(--primary-cyan);
                box-shadow: 0 0 0 0 rgba(0, 217, 255, 0.7);
            }
            50% { 
                border-color: var(--accent-orange);
                box-shadow: 0 0 0 10px rgba(0, 217, 255, 0);
            }
        }

        .terms-checkbox input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 3px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-dark);
            background: none;
            border: none;
            padding: 0;
            width: 30px;
            height: 30px;
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--accent-orange);
        }

        .modal h3 {
            color: var(--primary-navy);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .summary-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        .summary-item strong {
            color: var(--primary-navy);
        }

        .summary-total {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--accent-orange);
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--primary-navy);
        }

        .email-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            margin: 15px 0;
        }

        .email-input:focus {
            outline: none;
            border-color: var(--primary-cyan);
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-navy);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 3000;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .toast.active {
            display: block;
        }

        .toast.success {
            background: var(--success-green);
        }

        .toast.error {
            background: var(--accent-orange);
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sticky-header {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .header-info h1 {
                font-size: 1.3rem;
            }

            .header-metrics {
                justify-content: center;
                flex-wrap: wrap;
            }

            .header-buttons {
                flex-direction: column;
            }

            .packages-grid,
            .addons-grid {
                grid-template-columns: 1fr;
            }

            .btn {
                width: 100%;
                padding: 14px;
            }

            .package-card input[type="radio"],
            .addon-card input[type="checkbox"],
            .terms-checkbox input[type="checkbox"] {
                width: 22px;
                height: 22px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .sticky-header {
                padding: 15px;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .modal-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Sticky Header -->
    <div class="sticky-header">
        <div class="header-info">
            <h1>BMJ-Machinery Marketing Proposal</h1>
            <div class="header-metrics">
                <div class="metric">
                    <span class="metric-label">Monthly Investment</span>
                    <span class="metric-value" id="header-total">$0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Expected Prospects Reached</span>
                    <span class="metric-value" id="header-prospects">0</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Payment</span>
                    <span class="metric-value" id="header-payment">Select Term</span>
                </div>
            </div>
        </div>
        <div class="header-buttons">
            <button class="btn btn-secondary" id="clear-btn">Clear Selections</button>
            <button class="btn btn-primary" id="email-btn" disabled>Email Proposal</button>
        </div>
    </div>

    <div class="container">
        <!-- Company Summary -->
        <div class="company-summary">
            <h2>Proposal for BMJ-Machinery</h2>
            <div class="intro-text">
                <p><strong>Dear Eric / Chi Feng,</strong></p>
                <p>We've prepared this customized proposal builder for BMJ-Machinery. This interactive tool allows you to explore our comprehensive marketing solutions and build a package that perfectly aligns with your business objectives and growth targets.</p>
            </div>
            <p>BMJ-Machinery is a leading provider of precision machinery solutions serving the Taiwanese manufacturing sector. With a reputation for quality and innovation, BMJ-Machinery requires a marketing strategy that reflects its position as an industry leader while driving measurable business growth.</p>
            
            <div class="instructions">
                <strong>ðŸ“‹ How to Use This Proposal Builder:</strong>
                <ol>
                    <li><strong>Select Your Base Package:</strong> Choose from three comprehensive tiers (Growth Accelerator, Market Domination, or Industry Leadership)</li>
                    <li><strong>Add Strategic Services:</strong> Enhance your package with specialized add-ons tailored to your needs</li>
                    <li><strong>Choose Payment Terms:</strong> Select monthly, quarterly, semi-annual, or annual payment with progressive discounts</li>
                    <li><strong>Review & Finalize:</strong> Click "Finalize Selections" to lock in your choices</li>
                    <li><strong>Agree to Terms:</strong> Review and accept the terms, assumptions, and commitments</li>
                    <li><strong>Send Proposal:</strong> Email the detailed proposal PDF to yourself or your team</li>
                </ol>
            </div>
        </div>

        <!-- Base Packages -->
        <section class="packages-section">
            <h2 class="section-title">Choose Your Base Package</h2>
            <div class="packages-grid">
                <!-- Package 1 -->
                <div class="package-card" data-package="growth">
                    <div class="package-header">
                        <input type="radio" name="package" value="growth" id="package-growth" onchange="selectPackage('growth')">
                        <div class="package-content">
                            <div class="package-name">Growth Accelerator</div>
                            <div class="package-price">$5,500/month</div>
                        </div>
                    </div>
                    <p><strong>Perfect for:</strong> Companies establishing their digital presence and generating initial market traction.</p>
                    <ul class="package-features">
                        <li>LinkedIn Lead Generation (100 prospects/month)</li>
                        <li>Basic SEO (5 keywords)</li>
                        <li>Google Ads Management ($2,000 ad spend)</li>
                        <li>Monthly Performance Report</li>
                    </ul>
                </div>

                <!-- Package 2 (Decoy) -->
                <div class="package-card" data-package="domination">
                    <div class="package-header">
                        <input type="radio" name="package" value="domination" id="package-domination" onchange="selectPackage('domination')">
                        <div class="package-content">
                            <div class="package-name">Market Domination</div>
                            <div class="package-price">$7,800/month</div>
                        </div>
                    </div>
                    <p><strong>Perfect for:</strong> Growing companies seeking competitive advantage and expanded market reach.</p>
                    <ul class="package-features">
                        <li>LinkedIn Lead Generation (200 prospects/month)</li>
                        <li>Advanced SEO (10 keywords)</li>
                        <li>Google Ads Management ($3,500 ad spend)</li>
                        <li>Email Marketing Campaigns</li>
                        <li>Bi-weekly Performance Reports</li>
                    </ul>
                </div>

                <!-- Package 3 (Anchor) -->
                <div class="package-card" data-package="leadership">
                    <div class="package-header">
                        <input type="radio" name="package" value="leadership" id="package-leadership" onchange="selectPackage('leadership')">
                        <div class="package-content">
                            <div class="package-name">Industry Leadership</div>
                            <div class="package-price">$8,900/month</div>
                        </div>
                    </div>
                    <p><strong>Perfect for:</strong> Market leaders dominating their sector with comprehensive multi-channel strategies.</p>
                    <ul class="package-features">
                        <li>LinkedIn Lead Generation (300 prospects/month)</li>
                        <li>Premium SEO (20 keywords)</li>
                        <li>Google Ads Management ($5,000 ad spend)</li>
                        <li>Advanced Email Marketing</li>
                        <li>Social Media Management</li>
                        <li>Weekly Performance Reports & Strategy Calls</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Add-ons -->
        <section class="addons-section">
            <h2 class="section-title">Enhance with Strategic Add-Ons</h2>
            <div class="addons-grid">
                <div class="addon-card disabled" data-addon="analytics">
                    <input type="checkbox" id="addon-analytics" data-addon-price="800" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Advanced Analytics Dashboard</div>
                        <div class="addon-price">+$800/month</div>
                        <p>Real-time KPI tracking, custom reporting, conversion funnel analysis, ROI calculator</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="content">
                    <input type="checkbox" id="addon-content" data-addon-price="1200" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Content Marketing Engine</div>
                        <div class="addon-price">+$1,200/month</div>
                        <p>4 blog posts, 2 case studies, industry thought leadership articles, content distribution</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="video">
                    <input type="checkbox" id="addon-video" data-addon-price="1500" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Video Marketing Suite</div>
                        <div class="addon-price">+$1,500/month</div>
                        <p>2 professional videos, YouTube optimization, video ad campaigns, social video content</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="pr">
                    <input type="checkbox" id="addon-pr" data-addon-price="1800" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Press Release Distribution</div>
                        <div class="addon-price">+$1,800/month</div>
                        <p>2 press releases, distribution to 100+ media outlets across any 2 countries and any 5 industries of your choice</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="copywriter">
                    <input type="checkbox" id="addon-copywriter" data-addon-price="1000" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Dedicated Copywriter</div>
                        <div class="addon-price">+$1,000/month</div>
                        <p>Website copy, ad copy, email sequences, landing pages, sales collateral</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="crm">
                    <input type="checkbox" id="addon-crm" data-addon-price="600" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">CRM Integration & Management</div>
                        <div class="addon-price">+$600/month</div>
                        <p>CRM setup, lead tracking, pipeline management, automation workflows</p>
                    </div>
                </div>

                <div class="addon-card disabled" data-addon="consulting">
                    <input type="checkbox" id="addon-consulting" data-addon-price="2000" onchange="updateMetrics()" disabled>
                    <div class="addon-content">
                        <div class="addon-name">Strategic Marketing Consulting</div>
                        <div class="addon-price">+$2,000/month</div>
                        <p>4 hours monthly consulting, market research, competitive analysis, growth strategy</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Payment Terms -->
        <section class="payment-section">
            <h2 class="section-title">Select Payment Terms</h2>
            <div class="payment-grid">
                <div class="payment-option" data-term="monthly">
                    <input type="radio" name="payment" value="monthly" id="payment-monthly" onchange="selectPaymentTerm('monthly')">
                    <div class="payment-label">
                        <div class="payment-term">Monthly</div>
                        <small>Pay month-to-month</small>
                    </div>
                </div>

                <div class="payment-option" data-term="quarterly">
                    <input type="radio" name="payment" value="quarterly" id="payment-quarterly" onchange="selectPaymentTerm('quarterly')">
                    <div class="payment-label">
                        <div class="payment-term">Quarterly<span class="discount-badge">Save 5%</span></div>
                        <small>Pay every 3 months</small>
                    </div>
                </div>

                <div class="payment-option" data-term="semi-annual">
                    <input type="radio" name="payment" value="semi-annual" id="payment-semi-annual" onchange="selectPaymentTerm('semi-annual')">
                    <div class="payment-label">
                        <div class="payment-term">Semi-Annual<span class="discount-badge">Save 10%</span></div>
                        <small>Pay every 6 months</small>
                    </div>
                </div>

                <div class="payment-option" data-term="annual">
                    <input type="radio" name="payment" value="annual" id="payment-annual" onchange="selectPaymentTerm('annual')">
                    <div class="payment-label">
                        <div class="payment-term">Annual<span class="discount-badge">Save 15%</span></div>
                        <small>Pay yearly upfront</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Finalize Button -->
        <div class="finalize-section">
            <button class="btn btn-finalize" id="finalize-btn" disabled>Finalize Selections</button>
        </div>

        <!-- Terms & Conditions -->
        <section class="terms-section">
            <h2 class="section-title">Terms & Conditions</h2>
            
            <div class="terms-checkbox" id="terms-box">
                <input type="checkbox" id="terms-agree" onchange="updateEmailButtonState()">
                <label for="terms-agree">
                    <strong>â˜‘ I have reviewed and agree to the Terms & Conditions, Assumptions, and Client Commitments outlined below</strong>
                </label>
            </div>

            <h3>Key Assumptions</h3>
            <ul>
                <li>Client provides timely access to necessary systems, credentials, and brand assets</li>
                <li>Client reviews and approves deliverables within 48 hours</li>
                <li>All prospect reach numbers are estimates based on industry benchmarks</li>
                <li>Ad spend budgets are separate from monthly service fees</li>
                <li>Results may vary based on market conditions, industry competition, and client responsiveness</li>
            </ul>

            <h3>Client Commitments</h3>
            <ul>
                <li>Provide access to required platforms (LinkedIn, Google Ads, CRM, website)</li>
                <li>Respond to queries and approval requests within 48 business hours</li>
                <li>Supply necessary product information, case studies, and testimonials</li>
                <li>Maintain consistent communication with assigned account manager</li>
            </ul>

            <h3>Payment Terms</h3>
            <ul>
                <li>Payment due within 7 days of invoice date</li>
                <li>30-day cancellation notice required</li>
                <li>Setup fees may apply for new engagements</li>
                <li>Discounts apply only to prepaid terms (quarterly, semi-annual, annual)</li>
            </ul>

            <h3>Service Level Agreement</h3>
            <ul>
                <li>Dedicated account manager assigned within 48 hours of contract signing</li>
                <li>Initial strategy session scheduled within first week</li>
                <li>Campaign launches within 2 weeks of kickoff</li>
                <li>Regular reporting as specified in package tier</li>
            </ul>
        </section>
    </div>

    <!-- Email Modal -->
    <div class="modal" id="email-modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeEmailModal()">Ã—</button>
            <h3>ðŸ“§ Email Proposal Summary</h3>
            
            <div id="modal-summary">
                <!-- Summary will be inserted here -->
            </div>

            <label for="recipient-email"><strong>Recipient Email Address:</strong></label>
            <input type="email" id="recipient-email" class="email-input" placeholder="Enter recipient email" value="prashant.kay3@gmail.com">
            
            <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="sendEmail()">Send Email with PDF</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Configuration
        const BACKEND_URL = 'https://bmj-proposal.onrender.com'; // Change this to your deployed backend URL
        
        // Global State
        let selectedPackage = null;
        let selectedAddons = [];
        let selectedPaymentTerm = 'monthly';
        let isFinalized = false;
        let hasAgreed = false;

        // Package Data
        const packages = {
            growth: {
                name: 'Growth Accelerator',
                price: 5500,
                prospects: 100
            },
            domination: {
                name: 'Market Domination',
                price: 7800,
                prospects: 200
            },
            leadership: {
                name: 'Industry Leadership',
                price: 8900,
                prospects: 300
            }
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing...');
            
            // Initialize buttons
            const finalizeBtn = document.getElementById('finalize-btn');
            const emailBtn = document.getElementById('email-btn');
            const clearBtn = document.getElementById('clear-btn');
            
            // Add event listeners
            if (finalizeBtn) {
                finalizeBtn.addEventListener('click', finalizeSelections);
                console.log('Finalize button listener added');
            }
            
            if (emailBtn) {
                emailBtn.addEventListener('click', openEmailModal);
                console.log('Email button listener added');
            }
            
            if (clearBtn) {
                clearBtn.addEventListener('click', clearAllSelections);
                console.log('Clear button listener added');
            }
            
            // Initialize payment term
            const monthlyRadio = document.getElementById('payment-monthly');
            if (monthlyRadio) {
                monthlyRadio.checked = true;
            }
        });

        // Select Package
        function selectPackage(packageId) {
            console.log('Package selected:', packageId);
            selectedPackage = packageId;
            
            // Update UI
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-package="${packageId}"]`).classList.add('selected');
            
            // Enable add-ons
            const addons = document.querySelectorAll('.addon-card');
            addons.forEach(addon => {
                addon.classList.remove('disabled');
                const checkbox = addon.querySelector('input[type="checkbox"]');
                if (checkbox) {
                    checkbox.disabled = false;
                }
            });
            
            // Enable finalize button
            const finalizeBtn = document.getElementById('finalize-btn');
            if (finalizeBtn) {
                finalizeBtn.disabled = false;
                console.log('Finalize button enabled');
            }
            
            updateMetrics();
        }

        // Select Payment Term
        function selectPaymentTerm(term) {
            console.log('Payment term selected:', term);
            selectedPaymentTerm = term;
            
            // Update UI
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-term="${term}"]`).classList.add('selected');
            
            updateMetrics();
        }

        // Update Metrics
        function updateMetrics() {
            if (!selectedPackage) return;
            
            const pkg = packages[selectedPackage];
            let monthlyTotal = pkg.price;
            let prospects = pkg.prospects;
            
            // Add selected add-ons
            selectedAddons = [];
            document.querySelectorAll('.addon-card input[type="checkbox"]:checked').forEach(checkbox => {
                const price = parseInt(checkbox.dataset.addonPrice);
                monthlyTotal += price;
                prospects += 50; // Estimate 50 additional prospects per add-on
                selectedAddons.push({
                    id: checkbox.id,
                    name: checkbox.closest('.addon-card').querySelector('.addon-name').textContent,
                    price: price
                });
            });
            
            // Apply payment term discount
            const discounts = {
                monthly: 0,
                quarterly: 0.05,
                'semi-annual': 0.10,
                annual: 0.15
            };
            
            const discount = discounts[selectedPaymentTerm] || 0;
            const discountedTotal = monthlyTotal * (1 - discount);
            
            // Calculate payment amounts
            const multipliers = {
                monthly: 1,
                quarterly: 3,
                'semi-annual': 6,
                annual: 12
            };
            
            const firstPayment = discountedTotal * multipliers[selectedPaymentTerm];
            
            // Update header
            document.getElementById('header-total').textContent = `$${monthlyTotal.toLocaleString()}`;
            document.getElementById('header-prospects').textContent = prospects.toLocaleString();
            
            const paymentLabels = {
                monthly: 'Monthly',
                quarterly: 'Quarterly (5% off)',
                'semi-annual': 'Semi-Annual (10% off)',
                annual: 'Annual (15% off)'
            };
            document.getElementById('header-payment').textContent = paymentLabels[selectedPaymentTerm];
            
            console.log('Metrics updated:', { monthlyTotal, prospects, selectedPaymentTerm });
        }

        // Finalize Selections
        function finalizeSelections() {
            console.log('Finalize button clicked');
            
            if (!selectedPackage) {
                showToast('Please select a base package first', 'error');
                return;
            }
            
            isFinalized = true;
            
            // Scroll to terms section
            const termsBox = document.getElementById('terms-box');
            if (termsBox) {
                termsBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Add pulse animation
                setTimeout(() => {
                    termsBox.classList.add('pulse');
                    setTimeout(() => {
                        termsBox.classList.remove('pulse');
                    }, 6000);
                }, 500);
            }
            
            // Update button text
            const finalizeBtn = document.getElementById('finalize-btn');
            if (finalizeBtn) {
                finalizeBtn.textContent = 'â†‘ Back to Top';
                finalizeBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            
            updateEmailButtonState();
            showToast('âœ“ Selections finalized! Please review and agree to terms below.', 'success');
            
            console.log('Finalized state:', { isFinalized, hasAgreed });
        }

        // Update Email Button State
        function updateEmailButtonState() {
            const termsCheckbox = document.getElementById('terms-agree');
            hasAgreed = termsCheckbox ? termsCheckbox.checked : false;
            
            const emailBtn = document.getElementById('email-btn');
            if (emailBtn) {
                const canSendEmail = isFinalized && hasAgreed;
                emailBtn.disabled = !canSendEmail;
                
                if (canSendEmail) {
                    emailBtn.classList.add('btn-pulse');
                } else {
                    emailBtn.classList.remove('btn-pulse');
                }
                
                console.log('Email button state:', { isFinalized, hasAgreed, canSendEmail });
            }
        }

        // Open Email Modal
        function openEmailModal() {
            console.log('Opening email modal');
            
            if (!selectedPackage) {
                showToast('Please select a package first', 'error');
                return;
            }
            
            // Generate summary
            const pkg = packages[selectedPackage];
            let monthlyTotal = pkg.price;
            
            let summaryHTML = `
                <div class="summary-item">
                    <strong>Base Package:</strong>
                    <span>${pkg.name} ($${pkg.price.toLocaleString()}/mo)</span>
                </div>
            `;
            
            // Add-ons
            selectedAddons.forEach(addon => {
                monthlyTotal += addon.price;
                summaryHTML += `
                    <div class="summary-item">
                        <strong>Add-on:</strong>
                        <span>${addon.name} (+$${addon.price.toLocaleString()}/mo)</span>
                    </div>
                `;
            });
            
            // Payment term
            const discounts = {
                monthly: 0,
                quarterly: 0.05,
                'semi-annual': 0.10,
                annual: 0.15
            };
            
            const discount = discounts[selectedPaymentTerm] || 0;
            const discountedMonthly = monthlyTotal * (1 - discount);
            
            const multipliers = {
                monthly: 1,
                quarterly: 3,
                'semi-annual': 6,
                annual: 12
            };
            
            const firstPayment = discountedMonthly * multipliers[selectedPaymentTerm];
            
            const paymentLabels = {
                monthly: 'Monthly',
                quarterly: 'Quarterly',
                'semi-annual': 'Semi-Annual',
                annual: 'Annual'
            };
            
            summaryHTML += `
                <div class="summary-item">
                    <strong>Payment Term:</strong>
                    <span>${paymentLabels[selectedPaymentTerm]} ${discount > 0 ? `(${discount * 100}% discount)` : ''}</span>
                </div>
                <div class="summary-item">
                    <strong>Monthly Rate:</strong>
                    <span>$${monthlyTotal.toLocaleString()}</span>
                </div>
                ${discount > 0 ? `
                <div class="summary-item">
                    <strong>Discounted Monthly:</strong>
                    <span>$${discountedMonthly.toLocaleString()}</span>
                </div>
                ` : ''}
                <div class="summary-total">
                    First Payment: $${firstPayment.toLocaleString()}
                </div>
            `;
            
            document.getElementById('modal-summary').innerHTML = summaryHTML;
            document.getElementById('email-modal').classList.add('active');
        }

        // Close Email Modal
        function closeEmailModal() {
            document.getElementById('email-modal').classList.remove('active');
        }

        // Send Email
        async function sendEmail() {
            const recipientEmail = document.getElementById('recipient-email').value;
            
            if (!recipientEmail || !recipientEmail.includes('@')) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            showToast('Sending email...', 'success');
            
            // Prepare proposal data
            const pkg = packages[selectedPackage];
            let monthlyTotal = pkg.price;
            
            selectedAddons.forEach(addon => {
                monthlyTotal += addon.price;
            });
            
            const discounts = {
                monthly: 0,
                quarterly: 0.05,
                'semi-annual': 0.10,
                annual: 0.15
            };
            
            const discount = discounts[selectedPaymentTerm] || 0;
            const discountedMonthly = monthlyTotal * (1 - discount);
            
            const multipliers = {
                monthly: 1,
                quarterly: 3,
                'semi-annual': 6,
                annual: 12
            };
            
            const firstPayment = discountedMonthly * multipliers[selectedPaymentTerm];
            
            const proposalData = {
                packageName: pkg.name,
                packagePrice: pkg.price,
                addons: selectedAddons,
                monthlyTotal: monthlyTotal,
                paymentTerm: selectedPaymentTerm,
                discount: discount * 100,
                discountedMonthly: discountedMonthly,
                firstPayment: firstPayment,
                prospects: pkg.prospects
            };
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/send-email`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        recipientEmail: recipientEmail,
                        proposalData: proposalData
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showToast('âœ“ Email sent successfully!', 'success');
                    closeEmailModal();
                } else {
                    showToast('Failed to send email. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Email send error:', error);
                showToast('Error sending email. Please check your connection.', 'error');
            }
        }

        // Clear All Selections
        function clearAllSelections() {
            console.log('Clearing all selections');
            
            // Reset state
            selectedPackage = null;
            selectedAddons = [];
            selectedPaymentTerm = 'monthly';
            isFinalized = false;
            hasAgreed = false;
            
            // Clear package selection
            document.querySelectorAll('.package-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('input[name="package"]').forEach(radio => {
                radio.checked = false;
            });
            
            // Clear and disable add-ons
            document.querySelectorAll('.addon-card').forEach(addon => {
                addon.classList.add('disabled');
                const checkbox = addon.querySelector('input[type="checkbox"]');
                if (checkbox) {
                    checkbox.checked = false;
                    checkbox.disabled = true;
                }
            });
            
            // Reset payment term
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            const monthlyRadio = document.getElementById('payment-monthly');
            if (monthlyRadio) {
                monthlyRadio.checked = true;
            }
            
            // Reset terms checkbox
            const termsCheckbox = document.getElementById('terms-agree');
            if (termsCheckbox) {
                termsCheckbox.checked = false;
            }
            
            // Disable buttons
            document.getElementById('finalize-btn').disabled = true;
            document.getElementById('finalize-btn').textContent = 'Finalize Selections';
            document.getElementById('finalize-btn').onclick = finalizeSelections;
            document.getElementById('email-btn').disabled = true;
            document.getElementById('email-btn').classList.remove('btn-pulse');
            
            // Reset header
            document.getElementById('header-total').textContent = '$0';
            document.getElementById('header-prospects').textContent = '0';
            document.getElementById('header-payment').textContent = 'Select Term';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            showToast('âœ“ All selections cleared', 'success');
        }

        // Show Toast Notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} active`;
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Prevent modal close on outside click
        document.getElementById('email-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                // Don't close - user must click X button
            }
        });
    </script>
</body>
</html>
